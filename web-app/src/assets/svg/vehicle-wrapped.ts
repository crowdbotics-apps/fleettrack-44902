import { APP_CONFIG } from "../../constants/constants";
import { TMapVehicleIconState } from "../../types/map";

// generates the SVG icon for the vehicle with the given state
export const mapVehicleIconWrapped = (
  iconState: TMapVehicleIconState,
  fill: boolean = false,
  rotateAngle: number = 0, // only for 'driving' state
  size: number = APP_CONFIG.MAPS.VEHICLE_ICON_SIZE,
  onlyIcon: boolean = false, // for displaying only the icon without the border
) => {
  const borderSize = 2;
  const imageOffset = borderSize + 2;
  let borderColor;
  switch (iconState) {
    case 'driving':
    case 'idle_active':
    case 'online':
      borderColor = APP_CONFIG.COLORS.GREEN;
      break;
    case 'idle_inactive':
    case 'stopped':
    case 'offline':
      borderColor = APP_CONFIG.COLORS.RED;
    break;
  }

  return '<svg'
    + ` width="${size}" height="${size}"`
    + ` viewBox="0 0 ${size} ${size}"`
    + ' xmlns="http://www.w3.org/2000/svg">'
    + (!onlyIcon && `<g transform="rotate(${rotateAngle - 45}, ${size / 2}, ${size / 2})">` // rotate the image
      + ` <circle cx="${size / 2}" cy="${size / 2}" r="${size / 2 - (borderSize / 2)}"`
        + ` stroke="${fill ? borderColor : 'none'}" stroke-width="${borderSize}"`
        + ` fill="${fill ? 'white' : 'none'}"`
      + ' />')
      + mapVehicleIconByState(iconState, imageOffset)
    + (!onlyIcon && '</g>')
    + '</svg>'
}

export const mapVehicleIconByState = (iconState: TMapVehicleIconState, imageOffset: number = 0) => {
  switch (iconState) {

    case 'driving':
      return `<g transform="translate(${imageOffset + 1}, ${imageOffset + 3})">` // imageOffset
        + `<path d="M6.85545 9.43028L6.7761 9.23345L6.5794 9.15379L0.834996 6.82742L0.835012 6.82738L0.828904 6.825C0.720262 6.78265 0.678998 6.73497 0.657962 6.69688L0.657853 6.69669C0.607857 6.60627 0.589513 6.52736 0.589508 6.45411C0.589504 6.39017 0.606745 6.31601 0.66137 6.22505C0.691606 6.17485 0.743179 6.12337 0.851135 6.08076L14.5372 0.955195L14.5466 0.951703L14.5557 0.947841C14.6436 0.910887 14.7017 0.912455 14.7488 0.925289C14.8329 0.948244 14.9007 0.987834 14.9603 1.04747L15.3139 0.693892L14.9603 1.04747C15.02 1.1071 15.0596 1.17492 15.0826 1.25905C15.0953 1.30574 15.0969 1.36345 15.0599 1.45094L15.056 1.46023L15.0524 1.46966L9.9085 15.1509C9.86825 15.2531 9.81799 15.3054 9.76465 15.338C9.67571 15.3923 9.60321 15.4093 9.54035 15.4093C9.47071 15.4093 9.39268 15.3913 9.30028 15.3388C9.25549 15.3133 9.20696 15.2679 9.16597 15.1618L9.16602 15.1618L9.16333 15.1551L6.85545 9.43028Z" fill="${APP_CONFIG.COLORS.GREEN}" stroke="white"/>`
      + '</g>';

    // case 'idle_inactive':
    //   imageOffset += 2;
    //   return `<g transform="translate(${imageOffset}, ${imageOffset})">` // imageOffset
    //     + `<path d="M8.00895 5.00724C7.1765 5.00657 6.46815 5.29788 5.8839 5.88119C5.29965 6.46449 5.00719 7.17237 5.00652 8.00481C5.00584 8.83726 5.29716 9.5456 5.88046 10.1299C6.46377 10.7141 7.17164 11.0066 8.00409 11.0072C8.83653 11.0079 9.54488 10.7166 10.1291 10.1333C10.7134 9.54999 11.0058 8.84212 11.0065 8.00967C11.0072 7.17723 10.7159 6.46888 10.1326 5.88463C9.54926 5.30038 8.84139 5.00792 8.00895 5.00724ZM8.01048 1.67391C8.88648 1.67462 9.70973 1.84151 10.4802 2.17458C11.2507 2.50765 11.9208 2.95936 12.4905 3.52971C13.0601 4.10006 13.511 4.77059 13.843 5.5413C14.1749 6.31202 14.3406 7.13532 14.3398 8.01121C14.3391 8.8872 14.1722 9.71046 13.8392 10.481C13.5061 11.2515 13.0544 11.9216 12.4841 12.4912C11.9137 13.0609 11.2432 13.5117 10.4725 13.8437C9.70174 14.1757 8.87844 14.3413 8.00255 14.3406C7.12655 14.3399 6.3033 14.173 5.53279 13.8399C4.76228 13.5068 4.0922 13.0551 3.52255 12.4848C2.9529 11.9144 2.50206 11.2439 2.17002 10.4732C1.83809 9.70247 1.67247 8.87917 1.67318 8.00328C1.67389 7.12728 1.84078 6.30402 2.17385 5.53352C2.50692 4.76301 2.95863 4.09293 3.52898 3.52328C4.09933 2.95363 4.76986 2.50279 5.54058 2.17074C6.31129 1.83881 7.13459 1.6732 8.01048 1.67391Z" fill="#E23131"/>`
    //   + '</g>'

    case 'stopped':
      imageOffset += 1;
      return `<g transform="translate(${imageOffset}, ${imageOffset})">` // imageOffset
        + `<circle cx="9" cy="9" r="8.5" fill="#E23131" stroke="white"/>`
        + `<path d="M8.2955 9.7045C8.4925 9.9015 8.72733 10 9 10C9.27267 10 9.5075 9.9015 9.7045 9.7045C9.9015 9.5075 10 9.27267 10 9C10 8.72733 9.9015 8.4925 9.7045 8.2955C9.5075 8.0985 9.27267 8 9 8C8.72733 8 8.4925 8.0985 8.2955 8.2955C8.0985 8.4925 8 8.72733 8 9C8 9.27267 8.0985 9.5075 8.2955 9.7045Z" fill="white"/>`
      + '</g>';

    case 'online':
    case 'idle_active':
      imageOffset += 1;
      return `<g transform="translate(${imageOffset}, ${imageOffset})">` // imageOffset
        + `<circle cx="9" cy="9" r="8.5" fill="#009006" stroke="white"/>`
        + `<path d="M5 8.99946C5 9.48854 5.07883 9.94737 5.2365 10.376C5.39425 10.8045 5.61604 11.1886 5.90187 11.5283C5.97437 11.6162 6.01221 11.712 6.01538 11.8158C6.01863 11.9197 5.98146 12.0104 5.90387 12.088C5.82629 12.1655 5.73508 12.2013 5.63025 12.1956C5.5255 12.1898 5.43692 12.143 5.3645 12.0552C5.0145 11.6379 4.74125 11.171 4.54475 10.6547C4.34825 10.1384 4.25 9.58662 4.25 8.99946C4.25 8.41229 4.34825 7.85925 4.54475 7.34033C4.74125 6.82141 5.0145 6.35587 5.3645 5.9437C5.43692 5.85587 5.5255 5.80908 5.63025 5.80333C5.73508 5.79758 5.82629 5.83345 5.90387 5.91095C5.98146 5.98854 6.01863 6.07925 6.01538 6.18308C6.01221 6.28691 5.97437 6.38275 5.90187 6.47058C5.61604 6.81866 5.39425 7.20696 5.2365 7.63546C5.07883 8.06404 5 8.51871 5 8.99946ZM7 8.99946C7 9.21037 7.03142 9.41004 7.09425 9.59846C7.15708 9.78696 7.24396 9.961 7.35488 10.1206C7.41379 10.2084 7.44279 10.3047 7.44188 10.4096C7.44088 10.5143 7.40158 10.6055 7.324 10.6831C7.2465 10.7607 7.15454 10.7966 7.04813 10.7908C6.94171 10.785 6.859 10.7382 6.8 10.6505C6.625 10.4215 6.48958 10.1659 6.39375 9.88358C6.29792 9.60125 6.25 9.30654 6.25 8.99946C6.25 8.68729 6.29792 8.39129 6.39375 8.11146C6.48958 7.83171 6.625 7.57737 6.8 7.34845C6.86408 7.2607 6.94804 7.21521 7.05187 7.21196C7.15579 7.20879 7.2465 7.24595 7.324 7.32345C7.40158 7.40104 7.44088 7.49096 7.44188 7.59321C7.44279 7.69546 7.41379 7.7905 7.35488 7.87833C7.24396 8.03791 7.15708 8.21196 7.09425 8.40046C7.03142 8.58887 7 8.78854 7 8.99946ZM9 9.74946C8.7955 9.74946 8.61938 9.67558 8.47163 9.52783C8.32388 9.38008 8.25 9.20396 8.25 8.99946C8.25 8.79496 8.32388 8.61883 8.47163 8.47108C8.61938 8.32333 8.7955 8.24946 9 8.24946C9.2045 8.24946 9.38063 8.32333 9.52838 8.47108C9.67613 8.61883 9.75 8.79496 9.75 8.99946C9.75 9.20396 9.67613 9.38008 9.52838 9.52783C9.38063 9.67558 9.2045 9.74946 9 9.74946ZM11 8.99946C11 8.78854 10.9686 8.58887 10.9058 8.40046C10.8429 8.21196 10.756 8.03791 10.6451 7.87833C10.5862 7.7905 10.5585 7.69416 10.562 7.58933C10.5655 7.48458 10.606 7.39341 10.6836 7.31583C10.7612 7.23825 10.8506 7.20233 10.9519 7.20808C11.0532 7.21391 11.1359 7.2607 11.2 7.34845C11.375 7.57737 11.5104 7.83171 11.6063 8.11146C11.7021 8.39129 11.75 8.68729 11.75 8.99946C11.75 9.30654 11.7021 9.60125 11.6063 9.88358C11.5104 10.1659 11.375 10.4215 11.2 10.6505C11.141 10.7382 11.0583 10.7837 10.9519 10.787C10.8455 10.7901 10.7535 10.753 10.676 10.6755C10.5984 10.5979 10.5591 10.508 10.5581 10.4057C10.5572 10.3035 10.5862 10.2084 10.6451 10.1206C10.756 9.961 10.8429 9.78696 10.9058 9.59846C10.9686 9.41004 11 9.21037 11 8.99946ZM13 8.99946C13 8.51354 12.9212 8.05633 12.7635 7.62783C12.6058 7.19933 12.384 6.81358 12.0981 6.47058C12.0256 6.38275 11.9865 6.28691 11.9808 6.18308C11.975 6.07925 12.0109 5.98854 12.0885 5.91095C12.166 5.83345 12.2585 5.79758 12.3659 5.80333C12.4732 5.80908 12.5631 5.85587 12.6355 5.9437C12.9855 6.35587 13.2587 6.82141 13.4552 7.34033C13.6517 7.85925 13.75 8.41229 13.75 8.99946C13.75 9.58662 13.6517 10.1384 13.4552 10.6547C13.2587 11.171 12.9855 11.6379 12.6355 12.0552C12.5631 12.143 12.4745 12.1898 12.3698 12.1956C12.2649 12.2013 12.1737 12.1655 12.0961 12.088C12.0185 12.0104 11.9814 11.9197 11.9846 11.8158C11.9878 11.712 12.0256 11.6162 12.0981 11.5283C12.384 11.1802 12.6058 10.792 12.7635 10.3635C12.9212 9.93487 13 9.48021 13 8.99946Z" fill="white"/>`
      + '</g>';

    case 'offline':
    case 'idle_inactive':
      imageOffset += 1;
      return `<g transform="translate(${imageOffset}, ${imageOffset})">` // imageOffset
        + `<circle cx="9" cy="9" r="8.5" fill="#E23131" stroke="white"/>`
        + `<path d="M12.6384 13.7003L7.17777 8.24744C7.12269 8.36277 7.07927 8.48215 7.04752 8.60556C7.01577 8.72898 6.9999 8.86056 6.9999 9.00031C6.9999 9.21123 7.03131 9.4109 7.09415 9.59931C7.15698 9.78781 7.24385 9.96185 7.35477 10.1214C7.41369 10.2093 7.44269 10.3056 7.44177 10.4104C7.44077 10.5152 7.40148 10.6064 7.3239 10.6839C7.2464 10.7615 7.15444 10.7974 7.04802 10.7917C6.9416 10.7859 6.8589 10.7391 6.7999 10.6513C6.6249 10.4224 6.48948 10.1668 6.39365 9.88444C6.29781 9.6021 6.2499 9.3074 6.2499 9.00031C6.2499 8.75415 6.28131 8.51952 6.34415 8.29644C6.40698 8.07335 6.49385 7.86598 6.60477 7.67431L5.6989 6.76856C5.47906 7.08781 5.3076 7.4346 5.18452 7.80894C5.06144 8.18327 4.9999 8.5804 4.9999 9.00031C4.9999 9.4894 5.07873 9.94823 5.2364 10.3768C5.39415 10.8053 5.61594 11.1894 5.90177 11.5292C5.97427 11.617 6.0121 11.7129 6.01527 11.8167C6.01852 11.9205 5.98135 12.0112 5.90377 12.0888C5.82619 12.1663 5.73498 12.2022 5.63015 12.1964C5.5254 12.1907 5.43681 12.1439 5.3644 12.0561C5.0144 11.6387 4.74115 11.1719 4.54465 10.6556C4.34815 10.1392 4.2499 9.58748 4.2499 9.00031C4.2499 8.47406 4.33002 7.97856 4.49027 7.51381C4.65052 7.04906 4.87265 6.6199 5.15665 6.22631L4.29227 5.36181C4.21785 5.28748 4.17985 5.19919 4.17827 5.09694C4.17669 4.99469 4.21469 4.90477 4.29227 4.82719C4.36977 4.74969 4.45885 4.71094 4.55952 4.71094C4.66019 4.71094 4.74927 4.74969 4.82677 4.82719L13.173 13.1734C13.2474 13.2478 13.2853 13.3348 13.2869 13.4344C13.2885 13.5341 13.2505 13.6227 13.173 13.7003C13.0954 13.7779 13.0063 13.8167 12.9056 13.8167C12.8051 13.8167 12.716 13.7779 12.6384 13.7003ZM12.7643 11.2176C12.6764 11.167 12.6186 11.0919 12.5908 10.9922C12.5629 10.8925 12.5716 10.7962 12.6171 10.7032C12.7447 10.4455 12.8404 10.1737 12.9043 9.88781C12.968 9.6019 12.9999 9.30606 12.9999 9.00031C12.9999 8.5144 12.9211 8.05719 12.7634 7.62869C12.6056 7.20019 12.3839 6.81444 12.098 6.47144C12.0255 6.3836 11.9864 6.28777 11.9806 6.18394C11.9749 6.0801 12.0108 5.9894 12.0884 5.91181C12.1659 5.83431 12.2584 5.79844 12.3658 5.80419C12.4731 5.80994 12.563 5.85673 12.6354 5.94456C12.9854 6.35673 13.2586 6.82227 13.4551 7.34119C13.6516 7.8601 13.7499 8.41315 13.7499 9.00031C13.7499 9.37531 13.7071 9.7391 13.6215 10.0917C13.5359 10.4443 13.4149 10.7773 13.2585 11.0907C13.213 11.1785 13.1412 11.2343 13.0431 11.2579C12.9451 11.2817 12.8521 11.2682 12.7643 11.2176ZM11.2066 9.97344C11.1002 9.94644 11.0212 9.89031 10.9696 9.80506C10.918 9.71981 10.9056 9.62398 10.9326 9.51756C10.9525 9.43423 10.9686 9.3501 10.9811 9.26519C10.9936 9.18027 10.9999 9.09198 10.9999 9.00031C10.9999 8.7894 10.9685 8.58973 10.9056 8.40131C10.8428 8.21281 10.7559 8.03877 10.645 7.87919C10.5861 7.79135 10.5584 7.69502 10.5619 7.59019C10.5654 7.48544 10.6059 7.39427 10.6835 7.31669C10.7611 7.2391 10.8505 7.20319 10.9518 7.20894C11.0531 7.21477 11.1358 7.26156 11.1999 7.34931C11.3749 7.57823 11.5103 7.83256 11.6061 8.11231C11.702 8.39215 11.7499 8.68815 11.7499 9.00031C11.7499 9.12215 11.7429 9.24073 11.7288 9.35606C11.7146 9.47148 11.6925 9.58431 11.6624 9.69456C11.6355 9.79581 11.5794 9.87431 11.4941 9.93006C11.4089 9.9859 11.3131 10.0004 11.2066 9.97344Z" fill="white"/>`
      + '</g>';

    // case 'idle_active':
    // default:
    //   imageOffset += 3;
    //   return `<g transform="translate(${imageOffset}, ${imageOffset})">` // imageOffset
    //     + `<path d="M2.95442 2.1734C3.61687 1.60022 4.3483 1.18716 5.1487 0.934227C5.9491 0.681296 6.75131 0.583795 7.55533 0.641723C8.35935 0.699652 9.1392 0.911094 9.89488 1.27605C10.6505 1.64108 11.3148 2.15478 11.8879 2.81714C12.4611 3.47959 12.8742 4.21102 13.1271 5.01142C13.38 5.81182 13.4775 6.61403 13.4196 7.41805C13.3617 8.22207 13.1502 9.00192 12.7853 9.7576C12.4203 10.5132 11.9066 11.1776 11.2442 11.7507C10.5818 12.3238 9.85033 12.7369 9.04992 12.9898C8.24952 13.2428 7.44731 13.3403 6.64329 13.2823C5.83928 13.2244 5.05943 13.013 4.30374 12.648C3.54814 12.283 2.88379 11.7693 2.31068 11.1069C1.7375 10.4445 1.32444 9.71304 1.07151 8.91264C0.818577 8.11224 0.721076 7.31003 0.779005 6.50601C0.836933 5.70199 1.04838 4.92214 1.41333 4.16646C1.77836 3.41086 2.29206 2.74651 2.95442 2.1734ZM3.60962 2.92885C2.48369 3.90306 1.86808 5.11894 1.76278 6.57649C1.65748 8.03405 2.09193 9.32579 3.06614 10.4517C4.04034 11.5776 5.25622 12.1933 6.71378 12.2986C8.17133 12.4039 9.46307 11.9694 10.589 10.9952C11.7149 10.021 12.3305 8.80512 12.4358 7.34757C12.5411 5.89001 12.1067 4.59827 11.1325 3.47234C10.1583 2.34641 8.9424 1.7308 7.48485 1.6255C6.02729 1.5202 4.73555 1.95465 3.60962 2.92885ZM3.60962 2.92885C4.73555 1.95465 6.02729 1.5202 7.48485 1.6255C8.9424 1.7308 10.1583 2.34641 11.1325 3.47234C12.1067 4.59827 12.5411 5.89001 12.4358 7.34757C12.3305 8.80512 11.7149 10.021 10.589 10.9952C9.46307 11.9694 8.17133 12.4039 6.71378 12.2986C5.25622 12.1933 4.04034 11.5776 3.06614 10.4517C2.09193 9.32579 1.65748 8.03405 1.76278 6.57649C1.86808 5.11894 2.48369 3.90306 3.60962 2.92885Z" fill="${APP_CONFIG.COLORS.GREEN}"/>`
    //   + '</g>';
  }
}
